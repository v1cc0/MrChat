# 项目进度

## 当前重点
- 基于现有 Hummingbird 代码梳理的成果，制定聊天界面重构路径、Turso 一体化持久层方案，以及音乐播放模块的并存策略。

## 已完成
- 读取并梳理 `src/ui`、`src/settings`、`src/services`、`src/media` 等核心模块的职责。
- 识别出 `gpui` 驱动的组件体系（按钮、输入框、模态框、主题）可作为聊天界面的基础。
- 初步整理 Playback/Library 扫描线程等与音频播放高度耦合的部分，后续将作为迁移/替换重点。
- 明确聊天后端统一通过 HTTP API 访问（无论远程还是本地 LLM 服务）。
- 决定保留 Hummingbird 播放器逻辑，作为工作流内的可选媒体播放模块。
- 确认 Turso 作为唯一数据库后端，取代原有 SQLite 依赖。

## 待办
- 设计新的聊天域模型（会话、消息、上下文存储）并映射到 GPUI 的 `Entity`/`Global` 状态。
- 拟定 UI 线路图：对齐现有窗口骨架（`WindowShadow`）及组件布局，规划对话列表区、消息区、输入区。
- 定义 Turso 数据模型（聊天会话/消息、媒体库、播放队列等），并确认与现有 `settings::Storage` 的职责边界。
- 规划 API Key 与 Turso 连接配置的存放方式，确保热更新与启动流程一致。
- 绘制服务层设计（LLM 请求、消息流式处理、错误重试），与 UI/模型层接口契合。
- 设计音乐模块与聊天界面的模块化隔离（启动/挂起/控制接口），确保互不干扰。
- 评估并改造音乐库扫描/查询/缓存逻辑以适配 Turso API。
